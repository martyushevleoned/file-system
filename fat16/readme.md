# FAT 16
## Пункт 1
Создать виртуальный диск и отформатировать его в файловой системе FAT16
```shell
dd if=/dev/zero of=fat16.img bs=1M count=10 # Создать образ диска размером 10 мб заполненный нулями
mkfs.vfat -F 16 fat16.img  # Создать файловую систему FAT16
```

## Пункт 2
Информация о файле / файловой системе
```shell
file fat16.img
fsck.fat -v fat16.img
```

```log
Checking we can access the last sector of the filesystem
Boot sector contents:
System ID "mkfs.fat"
Media byte 0xf8 (hard disk)
       512 bytes per logical sector
      2048 bytes per cluster
         4 reserved sectors
First FAT starts at byte 2048 (sector 4)
         2 FATs, 16 bit entries
     10240 bytes per FAT (= 20 sectors)
Root directory starts at byte 22528 (sector 44)
       512 root directory entries
Data area starts at byte 38912 (sector 76)
      5101 data clusters (10446848 bytes)
32 sectors/track, 2 heads
         0 hidden sectors
     20480 sectors total
Checking for unused clusters.
fat16.img: 0 files, 0/5101 clusters
```


Дамп диска
```shell
hexdump -C fat16.img # -C занчит "Каноничный" вывод (по байтам)
```

```dump
offset    00 01 02 03 04 05 06 07  08 09 0A 0B 0C 0D 0E 0F
00000000  eb 3c 90 6d 6b 66 73 2e  66 61 74 00 02 04 04 00  |.<.mkfs.fat.....|
00000010  02 00 02 00 50 f8 14 00  20 00 02 00 00 00 00 00  |....P... .......|
00000020  00 00 00 00 80 00 29 03  cc 84 31 4e 4f 20 4e 41  |......)...1NO NA|
00000030  4d 45 20 20 20 20 46 41  54 31 36 20 20 20 0e 1f  |ME    FAT16   ..|
00000040  be 5b 7c ac 22 c0 74 0b  56 b4 0e bb 07 00 cd 10  |.[|.".t.V.......|
00000050  5e eb f0 32 e4 cd 16 cd  19 eb fe 54 68 69 73 20  |^..2.......This |
00000060  69 73 20 6e 6f 74 20 61  20 62 6f 6f 74 61 62 6c  |is not a bootabl|
00000070  65 20 64 69 73 6b 2e 20  20 50 6c 65 61 73 65 20  |e disk.  Please |
00000080  69 6e 73 65 72 74 20 61  20 62 6f 6f 74 61 62 6c  |insert a bootabl|
00000090  65 20 66 6c 6f 70 70 79  20 61 6e 64 0d 0a 70 72  |e floppy and..pr|
000000a0  65 73 73 20 61 6e 79 20  6b 65 79 20 74 6f 20 74  |ess any key to t|
000000b0  72 79 20 61 67 61 69 6e  20 2e 2e 2e 20 0d 0a 00  |ry again ... ...|
000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000001f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 55 aa  |..............U.|
00000200  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000800  f8 ff ff ff 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000810  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00003000  f8 ff ff ff 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00003010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00a00000
```

## Пункт 3

| Смещение  | количество байт | параметр | raw hex | hex | dec |
| --------- | --------------- | -------- | ------- | --- | --- |
| 0x0B | 2 | Количество байт в секторе |00 02 | 200 | 512 |
| 0x0D | 1 | Количество секторов в кластере | 04 | 4 | 4 |
| 0x13 | 2 | Количество секторов в файловой системe | 00 50 | 5000 | 20480 |
| 0x20 | 4 | Количество секторов в файловой системe | 00 00 00 00 | 0 | 0 |
| 0x0E | 2 | Размер зарезервированной области (в секторах) | 04 00 | 4 | 4 |
| 0x10 | 1 | Количество копий FAT | 02 | 2 | 2 |
| 0x16 | 2 | Размер FAT (в секторах)  | 14 00 | 14 | 20 |

Проанализировать содержимое загрузочной записи и определить следующие параметры:
1) размер сектора = 200h байт = 512 байт
2) размер кластера = 4 сектора = 2048 байт
3) количество кластеров в файловой системе = 20480 секторов - 4 зарезервировано - 2 * 20 FAT - 32 корневой директории = 20404 секторов = 5101 кластер
4) размер зарезервированной области = 4 сектора = 800h байт
5) количество копий FAT = 2
6) размер FAT = 20 секторов
